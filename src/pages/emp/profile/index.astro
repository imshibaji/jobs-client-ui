---
import ProfileForm from "@/pages/_parts/react/ProfileForm";
import EmployeeLayout from "@/layouts/EmpLayout.astro";
import { APP_URL } from "astro:env/server";
import { User } from "@/utils/types/User";
import { useHttpClient } from "@/utils/useHttpClient";

const token = Astro.cookies.get('token')?.value as string;
const { id } = Astro.cookies.get('user')?.json() as User;
const user = await useHttpClient(token).get(APP_URL + `/users/${id}`).then(res => res.json()) as User;
---
<EmployeeLayout>
  <ProfileForm token={token} user={user} client:load />
</EmployeeLayout>
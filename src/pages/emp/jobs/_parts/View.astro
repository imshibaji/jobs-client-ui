---
export interface Props {
    job: any,
    company: any,
    recruiter: any,
    skills: string[]
}
const { job, company, recruiter, skills } = Astro.props;
---
<!-- Start AdminLayout Content Area -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Main Content Card Wrapper -->
    <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 mb-6 mt-4 border-t-8 border-violet-600">
        
        <!-- Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 pb-4 border-b border-gray-100">
            <div>
                <h3 class="text-3xl font-extrabold text-gray-900 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-violet-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1v-3.25m-7.5 0h1.5m6 0h1.5m-1-5.25v2.25m-1.5-2.25v2.25M6.625 10.625h2.25m6.75 0h2.25m-11.25 0V7.5M4.5 13.5V6a2 2 0 012-2h12a2 2 0 012 2v7.5M4.5 13.5h15" />
                    </svg>
                    Job Description
                </h3>
                <p class="text-xl font-bold text-violet-600 mt-1" id="job-title-header">{job.title}</p>
            </div>
            <div class="mt-3 sm:mt-0">
                <span class="inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-sm font-medium text-green-800 shadow-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                    {job.employmentType || 'Full Time'}
                </span>
            </div>
        </div>

        <!-- Content Grid: Details (Wide) and Metadata (Narrow) -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- COLUMN 1 & 2: JOB DETAILS & DESCRIPTION -->
            <div class="lg:col-span-2 space-y-8">
                
                <!-- Core Job Details Card -->
                <div class="bg-violet-50/50 rounded-xl p-6 border border-violet-100 shadow-lg">
                    <h1 class="text-2xl font-extrabold text-violet-800 mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        Job Overview
                    </h1>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-y-5 gap-x-4 text-sm">
                        <!-- Detail Item -->
                        <div class="col-span-2 md:col-span-1">
                            <p class="text-gray-500">ID</p>
                            <p class="detail-value">J-{job.id}</p>
                        </div>
                        <div class="col-span-2 md:col-span-1">
                            <p class="text-gray-500">Location</p>
                            <p class="detail-value">{job.location}</p>
                        </div>
                        <div class="col-span-2 md:col-span-1">
                            <p class="text-gray-500">Experience</p>
                            <p class="detail-value">{job.experience}</p>
                        </div>
                        <div class="col-span-2 md:col-span-1">
                            <p class="text-gray-500">Salary ({job.salaryType || 'Monthly'})</p>
                            <p class="detail-value">{job.salary || 'Not Specified'} ({job.currency || 'INR'})</p>
                        </div>
                    </div>
                </div>
                
                <!-- Description & Requirements Card -->
                <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-md space-y-6">
                    <h3 class="text-2xl font-bold text-gray-800 border-b pb-3 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-violet-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                        </svg>
                        Description & Requirements
                    </h3>

                    <!-- Description -->
                    <div class="space-y-2">
                        <p class="text-lg font-semibold text-gray-700">Description:</p>
                        <p class="text-gray-600 pl-4">{job.description}</p>
                    </div>

                    <!-- Requirements -->
                    <div class="space-y-2">
                        <p class="text-lg font-semibold text-gray-700">Requirements:</p>
                        <p class="text-gray-600 pl-4">{job.requirements}</p>
                    </div>

                    <!-- Responsibilities -->
                    <div class="space-y-2">
                        <p class="text-lg font-semibold text-gray-700">Responsibilities:</p>
                        <p class="text-gray-600 pl-4">{job.responsibilities}</p>
                    </div>

                    <!-- Benefits -->
                    <div class="space-y-2">
                        <p class="text-lg font-semibold text-gray-700">Benefits:</p>
                        <p class="text-gray-600 pl-4">{job.benefits}</p>
                    </div>
                    
                    <!-- Skills -->
                    <div class="space-y-2">
                        <p class="text-lg font-semibold text-gray-700">Key Skills:</p>
                        <div class="flex flex-wrap gap-2 mt-2">
                            {
                                skills && skills.map((skill: string) => (
                                    <span class="bg-gray-100 text-gray-700 text-xs font-medium px-3 py-1 rounded-full shadow-sm">{skill}</span>
                                ))
                            }
                        </div>
                    </div>
                </div>
            </div>

            <!-- COLUMN 3: METADATA -->
            <div class="lg:col-span-1 space-y-6">
                
                <!-- Posted By Card (Company Info) -->
                <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-md">
                    <h1 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-violet-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h-2M19 21h-2m-2 0h-2m-2 0h-2m-2 0H5M5 21h2M5 5v2m0 4h14m-12 5h8m-8 4h8" />
                        </svg>
                        Posted By
                    </h1>
                    
                    <div class="space-y-3 text-sm">
                        { company.name && <div class="space-y-1">
                            <p class="text-gray-500">Company</p>
                            <p class="detail-value text-lg">{ company.name || 'Unknown' }</p>
                        </div>}
                        { company.recruiterName && <div class="space-y-1">
                            <p class="text-gray-500">Recruiter Name</p>
                            <p class="detail-value">{ company.recruiterName || 'Unknown' }</p>
                        </div>}
                        { company.email && <div class="space-y-1">
                            <p class="text-gray-500">Email</p>
                            <a href={`mailto:${company.email || '#'}`} class="detail-value text-violet-600 hover:underline">{ company.email || 'Unknown' }</a>
                        </div>}
                        { company.address && <div class="space-y-1">
                            <p class="text-gray-500">Address</p>
                            <p class="detail-value">{ company.address || 'Unknown' }</p>
                        </div>}
                        { company.phoneNumber && <div class="space-y-1">
                            <p class="text-gray-500">Phone</p>
                            <a href={`tel:${company.phoneNumber || '#'}`}class="detail-value text-violet-600 hover:underline">{ company.phoneNumber || 'Unknown' }</a>
                        </div>}
                        { company.website && <div class="space-y-1">
                            <p class="text-gray-500">Website</p>
                            <a href={company.website || '#'} class="detail-value text-violet-600 hover:underline">{ company.website || 'Unknown' }</a>
                        </div>}
                    </div>
                </div>
                
                <!-- Managed By Card (User Info) -->
                <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-md">
                    <h1 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-violet-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        Managed By
                    </h1>  
                    <div class="space-y-1 text-sm">
                        <p class="text-gray-500">Manager Name</p>
                        <p class="detail-value text-lg">{ recruiter.name || 'Unknown' }</p>
                    </div>
                    <div class="space-y-1 text-sm">
                        <p class="text-gray-500">Phone</p>
                        <a href={`tel:${recruiter.phoneNumber || '#'}`} class="detail-value text-violet-600 hover:underline">{ recruiter.phoneNumber || 'Unknown' }</a>
                    </div>
                </div>

                <!-- Apply Now Card -->
                <!-- <div class="flex justify-center bg-white rounded-xl p-6 border border-gray-200 shadow-md">
                    <a href={`/user/jobs/apply/${job.id}`} class="w-full text-center bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-4 rounded-xl transition duration-150 shadow-lg shadow-violet-200/50">
                        Apply Now
                    </a>
                </div> -->
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row justify-between gap-4 mt-8 pt-6 border-t border-gray-100">
            <a href="/emp/jobs" class="w-full sm:w-1/2 text-center bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-4 rounded-xl transition duration-150 shadow-md">
                Back to Jobs
            </a>
            <a href={`/emp/jobs/${job.id}/edit`} class="w-full sm:w-1/2 text-center bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition duration-150 shadow-lg shadow-orange-200/50">
                Edit Job
            </a>
        </div>
    </div>
</div>
---
import AdminLayout from "@/layouts/AdminLayout.astro";
import ProfileForm from "@/components/react/ProfileForm";
import { APP_URL } from "astro:env/server";
import { User } from "@/utils/types/User";

const token = Astro.cookies.get('token')?.value as string;
const { id } = Astro.cookies.get('user')?.json() as User;
const user = await fetch(APP_URL + `/users/${id}`, {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${Astro.cookies.get('token')?.value}`
  }
}).then(res => res.json());
---
<AdminLayout>
  <ProfileForm token={token} user={user} client:load />
</AdminLayout>
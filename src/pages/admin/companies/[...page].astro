---
import AdminLayout from "@/layouts/AdminLayout.astro";
import QuickHighlight from "./_parts/QuickHighlight.astro";
import AllCompanies from "./_parts/AllCompanies.astro";
import { useHttpClient } from "@/utils/useHttpClient";
import { BASE_URL } from "astro:env/client";
import { getSSRPagination } from "@/utils/paginationUtils";
import PageNav from "@/components/PageNav.astro";
const token = Astro.cookies.get('token')?.value as string;
const companies = await useHttpClient(token).get(BASE_URL + '/companies').then(res => res.json());
const {page} = getSSRPagination(companies, Astro.url, 10, '/admin/companies');
---
<AdminLayout>
  <QuickHighlight />
  <AllCompanies data={page.data} />
  <PageNav page={page} />
</AdminLayout>
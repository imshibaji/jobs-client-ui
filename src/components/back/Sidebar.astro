---
import { LogOut, type Icon as IconType } from '@lucide/astro';

interface Props {
  menus?: {
    name: string;
    icon: typeof IconType | string;
    link: string;
    active?: boolean;
  }[];
  settings?: {
    name: string;
    icon: typeof IconType | string;
    link: string;
  }
}

const { menus, settings } = Astro.props;
const menuItems = menus || [
  {
    name: "Dashboard",
    icon: "üè†" ,
    link: "#",
    active: true,
  },
  {
    name: "Post a Job",
    icon: "üì§",
    link: "#",
  },
  {
    name: "Applications",
    icon: "üìÑ",
    link: "#",
  },
  {
    name: "Settings",
    icon: "‚öôÔ∏è",
    link: "#",
  },
];
---

<!-- Sidebar -->
  <aside id="sidebar" class="fixed top-0 left-0 h-screen w-64 bg-purple-700 text-white flex flex-col transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40">
    <div class="p-6 text-2xl font-bold border-b border-purple-600 flex justify-between items-center">
      <a class="flex items-center" href="/">
        <img src="/logo.png" alt="JobsForWomen" class="inline-block h-8 w-8 mr-2" />
        <div class="flex flex-col leading-tight">
            JobsForWoman
            <span class="text-xs text-gray-400">Beta</span>
        </div>
      </a>
      <button id="closeSidebar" class="absolute top-1 right-4 lg:hidden text-white text-2xl">&times;</button>
    </div>

    <div class="flex-1 flex flex-col items-stretch">
      <nav class="flex-1 p-4 space-y-3 text-sm overflow-y-auto align-top">
        {
          menuItems.map((item) => (
            <a href={item.link} class={item.active || Astro.url.pathname === item.link ? "flex items-center space-x-3 p-2 rounded-md bg-purple-800 transition duration-150" : "flex items-center space-x-3 p-2 rounded-md hover:bg-purple-800 transition duration-150"}>
              <span>{typeof item.icon === "string" ? item.icon : <item.icon /> }</span><span>{item.name}</span>
            </a>
          ))
        }
      </nav>
      <nav class="p-4 text-sm border-t border-purple-600">
        {
          settings && (
            <a href={settings.link} class={Astro.url.pathname === settings.link ? "flex items-center space-x-3 p-2 rounded-md bg-purple-800 transition duration-150" : "flex items-center space-x-3 p-2 rounded-md hover:bg-purple-800 transition duration-150"}>
              <span>{typeof settings.icon === "string" ? settings.icon : <settings.icon /> }</span><span>{settings.name}</span>
            </a>
          )
        }
        <a href="/logout" class="flex items-center space-x-3 p-2 rounded-md hover:bg-purple-800 transition duration-150">
          <span><LogOut /></span><span>Logout</span>
        </a>
      </nav>
    </div>


    <div class="p-4 border-t border-purple-600 text-sm text-center">
      ¬© {new Date().getFullYear()} JobsForWomen
    </div>
  </aside>
---
const user = await Astro.cookies.has('user')? await Astro.cookies.get('user')?.json(): null;

const nevs = [
    { name: "Home", href: "/" },
    { name: "Explore", href: "#vision" },
    { name: "Join Our Community", href: "https://chat.whatsapp.com/JMasqTYB5Lj1tT4J3uhbeD" },
];

---
<!-- ░░ TOP BAR ░░ -->
<header class="top-nav sticky top-0 z-50 shadow-sm bg-white">
    <div class="flex items-center justify-between px-4 py-3 md:px-6">
        <a href="/" class="text-2xl font-semibold text-primary flex items-center">
            <img src="/logo.png" alt="JobsForWomen" class="inline-block h-8 w-8 mr-1" />
            JobsForWoman
        </a>

        <nav class="hidden space-x-6 text-sm md:flex uppercase tracking-[0.25em] font-extrabold text-gray-400">
            {nevs.map((nav) => <a href={nav.href} class="hover:text-primary">{nav.name}</a>)}
        </nav>

        <div class="flex items-center space-x-3">
            <div class="hidden md:flex items-center space-x-3">
                {user && <a href="/user" class="rounded-md border border-primary px-3 py-2 text-primary hover:text-white hover:bg-purple-800">Hello, {user.name.split(' ')[0]}</a>}
                {!user && <a href="/login" class="rounded-md bg-primary px-3 py-2 text-white hover:bg-purple-800">JOIN THE NETWORK</a>}
            </div>

            <button id="menu-btn" class="block md:hidden text-gray-600 focus:outline-none">
                <svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden border-t border-gray-100 px-6 py-6 shadow-xl">
        <nav class="flex flex-col space-y-5 text-sm uppercase tracking-[0.2em] font-extrabold text-gray-400">
            {nevs.map((nav) => <a href={nav.href} class="hover:text-primary">{nav.name}</a>)}
            <hr class="border-gray-100">
            {user && <a href="/user" class="rounded-md border border-primary px-3 py-2 text-primary hover:text-white hover:bg-purple-800">Hello, {user.name.split(' ')[0]}, Your Dashboard</a>}
            {!user && <a href="/login" class="rounded-md bg-primary px-3 py-3 text-white text-center tracking-normal">JOIN THE NETWORK</a>}
        </nav>
    </div>
</header>

<style is:inline>
    body { font-family: 'Plus Jakarta Sans', sans-serif; background: #FFFDF9; color: #1a1a1a; scroll-behavior: smooth; }
    .font-serif-heading { font-family: 'Playfair Display', serif; letter-spacing: -0.02em; }
    .font-feminine { font-family: 'Cormorant Garamond', serif; font-style: italic; }
    /* .mesh-gradient { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-color: #FFFDF9; background-image: radial-gradient(at 0% 0%, hsla(270, 70%, 94%, 1) 0, transparent 50%), radial-gradient(at 100% 100%, hsla(30, 40%, 98%, 1) 0, transparent 50%); } */
    /* .founder-card { border: 2px solid #D4AF37; border-radius: 40px; overflow: hidden; } */
    .top-nav { background: rgba(255, 253, 249, 0.9); }
    .btn-hover:active { transform: scale(0.96); transition: 0.1s; }
</style>

<script is:inline>
    const btn = document.getElementById('menu-btn');
    const menu = document.getElementById('mobile-menu');
    const icon = document.getElementById('menu-icon');

    btn.addEventListener('click', () => {
        // Toggle the menu visibility
        menu.classList.toggle('hidden');

        // Optional: Change the icon to an 'X' when open
        if (menu.classList.contains('hidden')) {
            icon.setAttribute('d', 'M4 6h16M4 12h16m-7 6h7'); // Hamburger icon
        } else {
            icon.setAttribute('d', 'M6 18L18 6M6 6l12 12'); // X icon
        }
    });
</script>